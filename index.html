<html>
    <head>
        <title>index</title>
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    </head>
    <body>
        this is a page with nothing content
        <script src="rss-parser.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    </body>
    <script>
        var dataFlag = 'of';
        var bbb;
        const CORS_PROXY = "https://cors-anywhere.herokuapp.com/"
        setInterval(()=>{
            $.get(CORS_PROXY+'https://www.ithome.com/',(data,status)=>{
                var parser = new DOMParser();
                var data=parser.parseFromString(data, "text/html");
                var dataHash = data.querySelectorAll('.new-list-1 ul li')[0].textContent;
                var dataHashHref = data.querySelectorAll('.new-list-1 ul li')[0].lastChild.firstChild.href;
                if(dataFlag != dataHash){
                    var notification = new Notification('ithome',{
                        dir: 'auto',
                        icon: 'https://www.ithome.com/favicon.ico',
                        data: {
                            url: dataHashHref
                        },
                        body: dataHash
                    })
                    notification.onclick = function(){
                        window.open(notification.data.url);
                        console.log(dataHash);
                        notification.close();
                    }
                    dataFlag = dataHash;
                }
                else{
                    console.log(1);
                }
            },"html");
        },5000)
    </script>
</html>