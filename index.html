<html>
    <head>
        <title>index</title>
    </head>
    <body>
        this is a page with nothing content
        <script src="rss-parser.min.js"></script>
        <script src="md5.js"></script>
<script>

const CORS_PROXY = "https://cors-anywhere.herokuapp.com/"
var lastNews = '0f';
var newsMap = {'legth':0};
let parser = new RSSParser();
parser.parseURL(CORS_PROXY + 'https://www.ithome.com/rss/', function(err, feed) {
  for(let i = 0; i < 3; i++){
      var news = feed.items[i];
      newsMap[news.title] = news.link;
      if(lastNews != '0f'){
          if(lastNews == hex_md5(news.title)){
              break;
          }
          else{
            Notification.requestPermission();
            var notification = new Notification('ithome',{
                dir: 'auto',
                lang: 'html',
                tag:i,
                icon: 'https://www.ithome.com/favicon.ico',
                body: `${news.title}`
            })
            notification.onclick = function(){
                window.open(newsMap[news.title]);
                notification.close();
            }
          }
      }
      else{
          lastNews = hex_md5(news.title);
          Notification.requestPermission();
          var notification = new Notification('ithome',{
          dir: 'auto',
          lang: 'html',
          tag: i,
          icon: 'https://www.ithome.com/favicon.ico',
          body: `${news.title}`
          })
          notification.onclick = function(){
                window.open(newsMap[news.link]);
                notification.close();
            }
        }
  }
})
 
</script> 
    </body>
</html>